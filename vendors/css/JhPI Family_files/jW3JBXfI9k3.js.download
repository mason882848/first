if (self.CavalryLogger) { CavalryLogger.start_js(["jWZHq"]); }

__d("AttachmentRelatedShareTimingConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({EVENT_DELAY:1e3,HIDE_DELAY:100});f.exports=h}),null);
__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE:"like",REACT:"react",COMMENT:"comment",ATTACHMENT:"attachment",NETEGO:"netego",COMPOSER_POST:"composer_post"})}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEBUG:"debug",FANNING:"fanning",NONE:"none",STORY_CLICK:"story_click",UFI:"ufi"})}),null);
__d("PubcontentFeedChainingInjectionUtils",["getViewportDimensions"],(function a(b,c,d,e,f,g){"use strict";var h=100,i={isEligibleToInject:function j(k){var l=k.getBoundingClientRect(),m=l.top,n=c("getViewportDimensions").withoutScrollbars(),o=n.height;return!(!!o&&(o-m)/o*100>h)}};f.exports=i}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/events/async/related_events_pivot/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}})}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/ads_chaining/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}})}),null);
__d("XFundraiserAttachmentPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/social_good/fundraiser/attachment_pivot/",{ft_id:{type:"String"}})}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/led/async/follow_up_feed_unit/",{ft_id:{type:"String"},story_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}})}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_product/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}})}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/feed_chaining/",{actor_id:{type:"String",required:true},target_id:{type:"String"},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},only_qp_allowed:{type:"Bool",defaultValue:false},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/comment_chaining/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"},comment_string:{type:"String"}})}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/group_related_stories/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}})}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/inline_story_pivot_chaining/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}})}),null);
__d("XPubcontentLocalNewsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/local_news_chaining/",{ft_id:{type:"String"},story_id:{type:"String"}})}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/political_issue_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_share/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false},ft_id:{type:"String"}})}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_video/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"},cursor:{type:"String"},entry_point:{type:"Enum",enumType:1}})}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/topic_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/games/async/related_games/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}})}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/search/async/related_posts_pivot/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}})}),null);
__d("XShowsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/shows_chaining/",{page_id:{type:"Int",required:true},story_id:{type:"String",required:true}})}),null);
__d("XSpokespersonProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spokesperson/related_product/",{ft_id:{type:"String"},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("PubcontentFeedChainingControllerX",["csx","cx","AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","AttachmentRelatedShareTimingConstants","ContextualRecommendationsFeedChainingConfig","ContextualThing","CSS","DataAttributeUtils","DOM","DOMQuery","Event","FeedAdsChainingConfig","LEDExperimentEntryPoint","LitestandMessages","NavigationMessage","PageContextualRecommendationsTrigger","PageLikeConstants","Parent","PubcontentFeedChainingConfig","PubcontentFeedChainingInjectionUtils","PubcontentLocalNewsChainingConfig","PubcontentPoliticalIssueChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","RelatedEventsPivotChainingConfig","Run","SearchRelatedPostsPivotChainingConfig","StoryInlinePivotChainingConfig","SubscriptionsHandler","UFIFeedbackTargets","UFIUIEvents","URI","VideoChannelViewVariables","XEventRelatedEventsPivotController","XFeedAdsChainingController","XFundraiserAttachmentPivotController","XLEDFollowUpFeedUnitController","XPubcontentCommerceProductChainingController","XPubcontentFeedChainingController","XPubcontentFeedCommentChainingController","XPubcontentGroupRelatedStoriesChainingController","XPubcontentInlineStoryPivotChainingController","XPubcontentLocalNewsChainingController","XPubcontentPoliticalIssueChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XRelatedGamesChainingController","XSearchRelatedPostsPivotController","XShowsChainingController","XSpokespersonProductChainingController","cxodecode","getOrCreateDOMID"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="ei",k="ad_fan_page_action",l="ad_like_page_post_action",m="page_story_like_action",n="political_issue_story_article_click_action",o="local_news_story_article_click_action",p="related_share_article_click",q="related_product_click",r="related_share_video_click",s="related_share_video_view",t="page_share_like_action",u="topic_story_like_action",v="story_click_for_pivot_action",w="story_like_pivot_action",x="event_join",y="composer_publish_action",z="place_checkin_story_action",A="LIKE",B="COMMENT",C=500,D="SHOW_PAGE_FOLLOW",E="SHOW_PAGE_LIKE",F=c("VideoChannelViewVariables").channelPivots,G="._5v9_",H=null,I=false,J=null,K=null;L.init=function(P){__p&&__p();var Q=P.isLazy,R=P.srs,S=P.sdrs;if(R&&S){J=c("cxodecode")(R);K=c("cxodecode")(S)}if(!H)H=new L({isLazy:Q});if(!I){c("Run").onLeave(L.cleanup);c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,L.cleanup);I=true}};L.cleanup=function(){if(H){H.cleanup();H=null}};function L(P){__p&&__p();var Q=P.isLazy;this.$PubcontentFeedChainingControllerX1=c("PubcontentFeedChainingConfig");this.$PubcontentFeedChainingControllerX2=c("ContextualRecommendationsFeedChainingConfig");this.$PubcontentFeedChainingControllerX3=c("FeedAdsChainingConfig");this.$PubcontentFeedChainingControllerX4=c("PubcontentRelatedShareChainingConfig");this.$PubcontentFeedChainingControllerX5=c("PubcontentTopicChainingConfig");this.$PubcontentFeedChainingControllerX6=c("PubcontentPoliticalIssueChainingConfig");this.$PubcontentFeedChainingControllerX7=c("StoryInlinePivotChainingConfig");this.$PubcontentFeedChainingControllerX8=c("RelatedEventsPivotChainingConfig");this.$PubcontentFeedChainingControllerX9=c("SearchRelatedPostsPivotChainingConfig");this.$PubcontentFeedChainingControllerX10=c("PubcontentLocalNewsChainingConfig");this.$PubcontentFeedChainingControllerX11={};this.$PubcontentFeedChainingControllerX12=null;this.$PubcontentFeedChainingControllerX13=new(c("SubscriptionsHandler"))();this.$PubcontentFeedChainingControllerX13.addSubscriptions(this.$PubcontentFeedChainingControllerX14(c("PageLikeConstants").LIKED,Q,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ActionLinkLike,Q,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ReactionButtonClicked,Q,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").Comment,Q,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX18.bind(this))),this.$PubcontentFeedChainingControllerX14("composer/publish",Q,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14("LitestandComposer/publish",Q,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,Q,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX20.bind(this))),this.$PubcontentFeedChainingControllerX14(c("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK,Q,this.$PubcontentFeedChainingControllerX21.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").VIDEO_CLICK,Q,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX23.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW,Q,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_CLICK,Q,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").GAME_CLICK,Q,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PHOTO_CLICK,Q,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX26.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").EVENT_JOIN,Q,this.$PubcontentFeedChainingControllerX27.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PRODUCT_CLICK,Q,this.$PubcontentFeedChainingControllerX28.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").MAP_CLICK,Q,this.$PubcontentFeedChainingControllerX29.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK,Q,this.$PubcontentFeedChainingControllerX30.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").SHOW_FOLLOW_CLICK,Q,this.$PubcontentFeedChainingControllerX31.bind(this)))}L.prototype.$PubcontentFeedChainingControllerX14=function(event,P,Q){var R=P?[event,event+".lazy"]:[event];return c("Arbiter").subscribe(R,Q)};L.prototype.cleanup=function(){this.$PubcontentFeedChainingControllerX13&&this.$PubcontentFeedChainingControllerX13.release();this.$PubcontentFeedChainingControllerX13=null};L.getAdClientTokenIndex=function(){return j};L.prototype.$PubcontentFeedChainingControllerX15=function(P,Q){var R=this.findAdClientToken(Q.target);if(R)this.$PubcontentFeedChainingControllerX32(Q.target,{origin:k,actor_id:Q.profile_id,client_token:R});else this.$PubcontentFeedChainingControllerX33(Q.target,{origin:Q.origin,actor_id:Q.profile_id,trigger:c("PageContextualRecommendationsTrigger").FANNING,chaining_type:"contextual_recommendations",reaction_type:Q.reaction_type})};L.prototype.$PubcontentFeedChainingControllerX31=function(P,Q){var R=Q.attachment,S=Q.pageID,T=Q.storyID,U={origin:D},V=this.$PubcontentFeedChainingControllerX34(R,U);if(!V||!V.story)return;var W=c("XShowsChainingController").getURIBuilder().setInt("page_id",S).setString("story_id",T);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,V.story.id)).setURI(W.getURI()).setRelativeTo(V.chainingWrapper).setAllowCrossPageTransition(true).send()};L.prototype.$PubcontentFeedChainingControllerX17=function(P,Q){__p&&__p();if(!Q.ft_id||!Q.target||!Q.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(Q.target))||this.$PubcontentFeedChainingControllerX37(this.findStory(Q.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(Q.ft_id,function(R,S){__p&&__p();this.$PubcontentFeedChainingControllerX38(R,{ft_id:S.entidentifier,origin:A,in_place_pivot:true});var T=this.findAdClientToken(R);if(T&&S.isshare)this.$PubcontentFeedChainingControllerX32(R,{actor_id:S.actorid,origin:l,ft_id:S.entidentifier,client_token:T});else if(S.isActorFBEntity)this.$PubcontentFeedChainingControllerX39(R,{ft_id:S.entidentifier,reaction_type:Q.reaction_type,chaining_type:"contextual_recommendations",origin:A});else if(S.isownerpage){var U=S.isshare?t:m;if(S.isownershowpage)U=E;this.$PubcontentFeedChainingControllerX33(R,{actor_id:S.actorid,target_id:S.ownerid,content_id:S.entidentifier,ft_id:S.entidentifier,origin:U,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:Q.reaction_type})}else if(S.isshare)this.$PubcontentFeedChainingControllerX33(R,{actor_id:S.actorid,content_id:S.entidentifier,ft_id:S.entidentifier,origin:t,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:Q.reaction_type});else if(S.grouporeventid){if(this.shouldPuntGroupChaining(R))return;this.$PubcontentFeedChainingControllerX40(R,{post_id:S.entidentifier,origin:A})}else if(S.isownerfriend&&S.allowpivotqpsonfriendstory)this.$PubcontentFeedChainingControllerX33(R,{actor_id:S.actorid,content_id:S.entidentifier,ft_id:S.entidentifier,origin:A,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:Q.reaction_type,only_qp_allowed:true});else if(S.isplacecheckin)this.$PubcontentFeedChainingControllerX41(R,{ft_id:S.entidentifier,origin:z},c("LEDExperimentEntryPoint").LIKE);else{var V=this.$PubcontentFeedChainingControllerX42(R,{origin:w,ft_id:S.entidentifier});if(!V)this.$PubcontentFeedChainingControllerX43(R,{origin:u,ft_id:S.entidentifier})}}.bind(this,Q.target))};L.prototype.$PubcontentFeedChainingControllerX18=function(P,Q){__p&&__p();if(!Q.ft_id||!Q.target)return;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(Q.target))||this.$PubcontentFeedChainingControllerX37(this.findStory(Q.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(Q.ft_id,function(R,S){this.$PubcontentFeedChainingControllerX38(R,{ft_id:S.entidentifier,origin:B,in_place_pivot:true});if(S.grouporeventid){if(this.shouldPuntGroupChaining(R))return;this.$PubcontentFeedChainingControllerX44(R,{origin:B,event_id:S.grouporeventid})}else if(S.isplacecheckin)this.$PubcontentFeedChainingControllerX41(R,{ft_id:S.entidentifier,origin:z},c("LEDExperimentEntryPoint").COMMENT);else this.$PubcontentFeedChainingControllerX45(Q.target,{origin:p,action_trigger:B,ft_id:S.entidentifier,comment_string:Q.commentString})}.bind(this,Q.target))};L.prototype.$PubcontentFeedChainingControllerX42=function(P,Q){__p&&__p();var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XPubcontentInlineStoryPivotChainingController").getURIBuilder().setString("origin",Q.origin);if(Q.story_id)S.setString("storyid",String(Q.story_id));if(Q.ft_id)S.setString("ftid",String(Q.ft_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX43=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R||!this.$PubcontentFeedChainingControllerX46())return;var S=c("XPubcontentTopicChainingController").getURIBuilder().setString("ft_id",Q.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return};L.prototype.$PubcontentFeedChainingControllerX47=function(P,Q,R,S){__p&&__p();var T=R.ft_id;if(!T){S&&S();return}var U=this.findStory(Q);if(N(U)||O(U)){S&&S();return}var V=this.$PubcontentFeedChainingControllerX34(Q,R);if(!V){S&&S();return}var W=P.getURIBuilder().setString("ft_id",T);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(V.story.id);S&&S()}.bind(this)).setRelativeTo(V.chainingWrapper).setURI(W.getURI()).setAllowCrossPageTransition(true).setHandler(function(X){if(!X.payload.is_chained){this.$PubcontentFeedChainingControllerX35(V.story.id);S&&S()}}.bind(this)).send();return};L.prototype.$PubcontentFeedChainingControllerX26=function(P,Q){var R=this;R.$PubcontentFeedChainingControllerX42(Q.attachment,{origin:v,story_id:Q.storyid})};L.prototype.$PubcontentFeedChainingControllerX20=function(P,Q){this.$PubcontentFeedChainingControllerX48(P,Q,true)};L.prototype.$PubcontentFeedChainingControllerX21=function(P,Q){this.$PubcontentFeedChainingControllerX48(P,Q,false)};L.prototype.$PubcontentFeedChainingControllerX48=function(P,Q,R){__p&&__p();if(c("AggregatedLinkComposerConfig").no_chained_related_stories==="true")return;var S=this,T=this.findStory(Q.attachment),U=c("DOMQuery").scry(c("DOMQuery").getRootElement(),"#initial_browse_result").length>0;if(U)return;var V;if(Q.is_right_click)V=0;else V=c("AttachmentRelatedShareTimingConstants").EVENT_DELAY;setTimeout(function(){__p&&__p();if(T){var W=S.findAttachment(T);if(W)Q.attachment=W}Q.ft_id=S.findFeedbackTargetId(T);S.$PubcontentFeedChainingControllerX47(c("XPubcontentPoliticalIssueChainingController"),Q.attachment,{origin:n,ft_id:Q.ft_id},function(){if(!R)return;Q.origin=p;S.$PubcontentFeedChainingControllerX49(Q.attachment,Q)})},V)};L.prototype.$PubcontentFeedChainingControllerX23=function(P,Q){__p&&__p();if(!this.$PubcontentFeedChainingControllerX46())return;Q.origin=r;var R=this,S=this.findStory(Q.attachment);setTimeout(function(){if(S){var T=R.findAttachment(S);if(T)Q.attachment=T}R.$PubcontentFeedChainingControllerX49(Q.attachment,Q)},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};L.prototype.$PubcontentFeedChainingControllerX24=function(P,Q){__p&&__p();if(!this.$PubcontentFeedChainingControllerX46())return;Q.origin=P.indexOf(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW)===-1?r:s;var R=this,S=this.findStory(Q.attachment),T=function T(Q){if(S){var U=R.findAttachment(S);if(U)Q.attachment=U}R.$PubcontentFeedChainingControllerX49(Q.attachment,Q)};if(Q.in_smooth_injection_experiment)T(Q);else setTimeout(T.bind(this,Q),c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};L.prototype.$PubcontentFeedChainingControllerX25=function(P,Q){var R=this,S=this.findStory(Q.attachment);setTimeout(function(){if(S)var T=R.findContainer(S);R.$PubcontentFeedChainingControllerX50(S,Q.global_share_id,c("getOrCreateDOMID")(T))},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};L.prototype.$PubcontentFeedChainingControllerX27=function(P,Q){var R=this.findStory(Q.attachment);if(R){var S=this.findAttachment(R);if(S)Q.attachment=S}this.$PubcontentFeedChainingControllerX44(Q.attachment,{origin:x,event_id:Q.event_id})};L.prototype.$PubcontentFeedChainingControllerX28=function(P,Q){Q.origin=q;var R=this.findStory(Q.attachment);if(R){var S=this.findAttachment(R);if(S)Q.attachment=S}this.$PubcontentFeedChainingControllerX51(Q.attachment,Q)};L.prototype.$PubcontentFeedChainingControllerX29=function(P,Q){this.$PubcontentFeedChainingControllerX41(Q.attachment,{story_id:Q.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};L.prototype.$PubcontentFeedChainingControllerX30=function(P,Q){var R=this.findStory(Q.button);if(!R)return;this.$PubcontentFeedChainingControllerX41(R,{story_id:Q.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};L.prototype.$PubcontentFeedChainingControllerX19=function(P,Q){var R=this;setTimeout(function(){R.$PubcontentFeedChainingControllerX52(Q.markup.firstChild,{origin:y,content_id:Q.content_id})},this.$PubcontentFeedChainingControllerX9.composer_publish_action)};L.prototype.$PubcontentFeedChainingControllerX53=function(P){return!!(P&&P.id&&!c("CSS").matchesSelector(P,"._sf6")&&!(P.id in this.$PubcontentFeedChainingControllerX11)&&!c("DOM").scry(P,"._4nre")[0])};L.prototype.$PubcontentFeedChainingControllerX54=function(P){if(!P)return false;if(P.origin in this.$PubcontentFeedChainingControllerX1||P.origin in this.$PubcontentFeedChainingControllerX2||P.origin in this.$PubcontentFeedChainingControllerX4||P.origin in this.$PubcontentFeedChainingControllerX3||P.origin in this.$PubcontentFeedChainingControllerX7||P.origin in this.$PubcontentFeedChainingControllerX8||P.origin in this.$PubcontentFeedChainingControllerX9||P.origin in this.$PubcontentFeedChainingControllerX5||P.origin in this.$PubcontentFeedChainingControllerX6||P.origin in this.$PubcontentFeedChainingControllerX10||P.origin===q||P.origin===s||P.origin===z||P.origin===A||P.origin===B||P.origin===D||P.origin===E)return true;return false};L.prototype.$PubcontentFeedChainingControllerX55=function(P){this.$PubcontentFeedChainingControllerX11[P]=true};L.prototype.$PubcontentFeedChainingControllerX35=function(P){delete this.$PubcontentFeedChainingControllerX11[P]};L.prototype.$PubcontentFeedChainingControllerX36=function(P){__p&&__p();if(!P)return false;var Q="_3lkn",R=P.nextSibling,S=true;if(R&&R.firstChild){var T=R.firstChild;S=!(T.hasChildNodes()&&c("CSS").hasClass(T,Q))}if(!S)return false;var U=P.children[0],V=P.children[1],W="_4_ck";if(U&&c("CSS").hasClass(U,W)||V&&c("CSS").hasClass(V,W))return false;return true};L.prototype.$PubcontentFeedChainingControllerX37=function(P){if(!P)return true;var Q=c("DOM").scry(P,"._1xwr");if(Q.length)return true;return false};L.prototype.$PubcontentFeedChainingControllerX34=function(P,Q){__p&&__p();var R=this.findStory(P);if(!this.$PubcontentFeedChainingControllerX53(R))return null;if(!this.$PubcontentFeedChainingControllerX54(Q))return null;if(Q.in_place_pivot)return{chainingWrapper:R.firstChild,story:R,is_auto_expand:Q.is_auto_expand};this.$PubcontentFeedChainingControllerX55(R.id);if(M(R)&&Q.chaining_type!=="contextual_recommendations")return null;var S;if(!Q.continued_chaining){S=this.findContainer(R);if(!S)return null;var T=c("DOM").create("div"),U=c("DOM").appendContent(S,T);if(U.length!==1)return null}else{S=R;T=c("DOM").create("div");U=c("DOM").insertAfter(S,T);c("DOM").remove(S);if(U.length!==1)return null}if(Q.is_auto_expand)return{chainingWrapper:U[0],story:R,is_auto_expand:Q.is_auto_expand};else return{chainingWrapper:U[0],story:R}};L.prototype.$PubcontentFeedChainingControllerX32=function(P,Q){__p&&__p();var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=this.findStreamRoot(R.story);if(!S)return false;var T=S.getAttribute("id"),U=c("XFeedAdsChainingController").getURIBuilder().setString("actor_id",Q.actor_id).setString("origin",Q.origin).setString("ei",Q.client_token).setString("data_ownerid",T);if(Q.ft_id)U.setString("ft_id",Q.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(U.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX49=function(P,Q){__p&&__p();var R,S=this;if(!this.$PubcontentFeedChainingControllerX36(this.findStory(P)))return false;var T=this.$PubcontentFeedChainingControllerX34(P,Q);if(!T)return false;c("CSS").addClass(T.chainingWrapper,"_3lkn");var U=null;if(Q.fbvideo_id){U=c("XPubcontentRelatedVideoChainingController").getURIBuilder();U.setInt("fbvideo_id",Q.fbvideo_id)}else{U=c("XPubcontentRelatedShareChainingController").getURIBuilder();U.setInt("global_share_id",Q.global_share_id)}U.setString("attachment_div_id",c("getOrCreateDOMID")(Q.attachment));if(Q.ft_id)U.setString("ft_id",Q.ft_id);if(Q.link_url)U.setString("link_url",Q.link_url);if(Q.video_div_id)U.setString("video_div_id",Q.video_div_id);if(Q.share_id)U.setString("share_id",Q.share_id);var V=JSON.parse(c("DataAttributeUtils").getDataFt(T.story))||{};if("qid"in V&&"mf_story_key"in V){U.setString("qid",V.qid);U.setString("mf_story_key",V.mf_story_key)}if(Q.is_auto_expand){this.$PubcontentFeedChainingControllerX35(T.story.id);U.setBool("is_auto_expand",Q.is_auto_expand)}var W=new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,T.story.id)).setRelativeTo(T.chainingWrapper).setAllowCrossPageTransition(true).setURI(U.getURI());V&&W.setData(V);if(Q.in_smooth_injection_experiment)(function(){__p&&__p();var X=null,Y=c("Event").listen(window,"scroll",function(){this.$PubcontentFeedChainingControllerX56=true;if(X!==null)clearTimeout(X);X=setTimeout(function(){this.$PubcontentFeedChainingControllerX56=false;this.$PubcontentFeedChainingControllerX12&&this.$PubcontentFeedChainingControllerX12();this.$PubcontentFeedChainingControllerX12=null}.bind(this),C)}.bind(S));c("CSS").hide(T.chainingWrapper);W.setHandler(function(V){if(!this.$PubcontentFeedChainingControllerX56)this.$PubcontentFeedChainingControllerX57(P,T.chainingWrapper,Y);else this.$PubcontentFeedChainingControllerX12=this.$PubcontentFeedChainingControllerX57.bind(this,P,T.chainingWrapper,Y)}.bind(S))})();W.send();return true};L.prototype.$PubcontentFeedChainingControllerX50=function(P,Q,R){if(!this.$PubcontentFeedChainingControllerX53(P))return null;this.$PubcontentFeedChainingControllerX55(P.id);var S=c("XRelatedGamesChainingController").getURIBuilder().setInt("app_id",Q).setString("attachment_div_id",R);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,P.id)).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX33=function(P,Q){__p&&__p();var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=this.findStory(P),T=c("XPubcontentFeedChainingController").getURIBuilder().setString("actor_id",Q.actor_id).setString("target_id",Q.target_id).setString("origin",Q.origin).setString("referrer",Q.referrer).setString("trigger",Q.trigger).setBool("is_home_request",this.$PubcontentFeedChainingControllerX46()).setBool("is_sponsored",M(S)).setEnum("reaction_type",Q.reaction_type);if(Q.ft_id)T.setString("ft_id",Q.ft_id);if(Q.content_id)T.setString("content_id",Q.content_id);if(Q.only_qp_allowed)T.setBool("only_qp_allowed",Q.only_qp_allowed);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(T.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX44=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XEventRelatedEventsPivotController").getURIBuilder().setInt("event_id",Q.event_id).setString("attachment_id",c("getOrCreateDOMID")(P)).setString("trigger_action",Q.origin).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX22=function(P,Q){__p&&__p();return function(R,S){__p&&__p();var T={origin:z};if(S.storyid)T.story_id=S.storyid;else{var U=this.findStory(S.attachment);if(!U)return P(R,S);T.ft_id=this.findFeedbackTargetId(U)}return this.$PubcontentFeedChainingControllerX41(S.attachment,T,Q,function(){return P(R,S)})}.bind(this)};L.prototype.$PubcontentFeedChainingControllerX41=function(P,Q,R,S){__p&&__p();var T=c("XLEDFollowUpFeedUnitController").getURIBuilder().setEnum("entry_point",R);if(Q.ft_id)T=T.setString("ft_id",Q.ft_id);if(Q.story_id)T=T.setString("story_id",Q.story_id);var U=this.$PubcontentFeedChainingControllerX34(P,Q);if(!U){S&&S();return}new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(U.story.id);S&&S()}.bind(this)).setHandler(function(V){if(!V.payload.is_chained){this.$PubcontentFeedChainingControllerX35(U.story.id);S&&S()}}.bind(this)).setRelativeTo(U.chainingWrapper).setURI(T.getURI()).setAllowCrossPageTransition(true).send()};L.prototype.$PubcontentFeedChainingControllerX16=function(P){__p&&__p();return function(Q,R){__p&&__p();var S=R.attachment,T=R.ft_id,U=R.storyid;if(!S||!T&&!U){var V=void 0;if(S)V=this.findStory(R.attachment);else if(R.target)V=this.findStory(R.target);if(V){if(!T)T=this.findFeedbackTargetId(V);if(!S)S=this.findAttachment(V)}}if(!S||!T&&!U)P(Q,R);this.$PubcontentFeedChainingControllerX58(S,{origin:o,ft_id:T,story_id:U},function(){return P(Q,R)})}.bind(this)};L.prototype.$PubcontentFeedChainingControllerX58=function(P,Q,R){__p&&__p();if(!Q.ft_id&&!Q.story_id)return false;var S=this.$PubcontentFeedChainingControllerX34(P,Q);if(!S)return false;var T=c("XPubcontentLocalNewsChainingController").getURIBuilder();if(Q.ft_id)T.setString("ft_id",Q.ft_id);if(Q.story_id)T.setString("story_id",Q.story_id);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX35(S.story.id);R&&R()}.bind(this)).setHandler(function(U){if(!U.payload.is_chained){this.$PubcontentFeedChainingControllerX35(S.story.id);R&&R()}}.bind(this)).setRelativeTo(S.chainingWrapper).setURI(T.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX39=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XSpokespersonProductChainingController").getURIBuilder().setString("ft_id",Q.ft_id).setEnum("reaction_type",Q.reaction_type).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX51=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XPubcontentCommerceProductChainingController").getURIBuilder().setString("attachment_id",c("getOrCreateDOMID")(P)).setInt("product_id",Q.product_id).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX52=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XSearchRelatedPostsPivotController").getURIBuilder().setString("origin",Q.origin).setString("content_id",String(Q.content_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX45=function(P,Q){__p&&__p();var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XPubcontentFeedCommentChainingController").getURIBuilder().setString("action_trigger",String(Q.action_trigger));if(Q.ft_id)S.setString("ft_id",Q.ft_id);if(Q.comment_string)S.setString("comment_string",Q.comment_string);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX40=function(P,Q){var R=this.$PubcontentFeedChainingControllerX34(P,Q);if(!R)return false;var S=c("XPubcontentGroupRelatedStoriesChainingController").getURIBuilder().setInt("post_id",Q.post_id).setBool("is_home_request",this.$PubcontentFeedChainingControllerX46()).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX35.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setURI(S).setAllowCrossPageTransition(true).send();return true};L.prototype.$PubcontentFeedChainingControllerX38=function(P,Q){var R=c("XFundraiserAttachmentPivotController").getURIBuilder();if(Q.ft_id)R=R.setString("ft_id",Q.ft_id);var S=this.$PubcontentFeedChainingControllerX34(P,Q);if(!S)return;new(c("AsyncRequest"))().setRelativeTo(S.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send()};L.prototype.findStory=function(P){if(!P)return;var Q="^div._3lb4",R=c("DOM").scry(P,Q);return R.length===1?R[0]:null};L.prototype.findFeedbackTargetId=function(P){__p&&__p();if(O(P)){var Q=c("DOMQuery").scry(P,"input[name='ft_ent_identifier']"),R=Q.find(function(S){return!N(S)});if(!R)return null;return R.value}else if(F){var S=c("DOMQuery").scry(P,"input[name='ft_ent_identifier']")[0];if(!S)return null;return S.value}else{var T=c("DOMQuery").find(P,"input[name='ft_ent_identifier']");if(!T)return null;return T.value}};L.prototype.findAttachment=function(P){var Q="div._6m2",R="div.iframeEmbed",S=c("DOM").scry(P,Q)[0]||c("DOM").scry(P,R)[0];return S};L.prototype.findContainer=function(P){var Q=c("DOM").create("div"),R=c("DOM").insertAfter(P,Q);c("ContextualThing").register(Q,P);return R.length>=1?R[0]:null};L.prototype.findStreamRoot=function(P){var Q="^div._4ikz";return c("DOM").scry(P,Q)[0]};L.prototype.findAdClientToken=function(P){var Q=this.findStory(P);if(!Q)return null;var R=c("DataAttributeUtils").getDataFt(Q);if(!R)return null;var S=JSON.parse(R);return S[L.getAdClientTokenIndex()]};L.prototype.shouldPuntGroupChaining=function(P){var Q="^._j_2";return c("DOM").scry(P,Q).length>=1};L.prototype.$PubcontentFeedChainingControllerX46=function(){var P=c("URI").getRequestURI(false);return P.getPath()==="/"||P.getPath()==="/home.php"};L.prototype.$PubcontentFeedChainingControllerX57=function(P,Q,R){var S=c("PubcontentFeedChainingInjectionUtils").isEligibleToInject(P);if(S){c("CSS").show(Q);c("Arbiter").inform(c("LitestandMessages").STORIES_INSERTED)}else c("DOM").empty(Q);R.remove()};function M(P){if(J&&K)return c("DOM").scry(P,J).length>0&&c("DOM").scry(P,K).length===0;else return c("DOM").scry(P,"._5paw").length>0&&c("DOM").scry(P,"._14zs").length===0}function N(P){return!!P&&(c("CSS").matchesSelector(P,G)||!!c("Parent").bySelector(P,G))}function O(P){return!!P&&c("DOM").scry(P,G).length>0}f.exports=L}),null);