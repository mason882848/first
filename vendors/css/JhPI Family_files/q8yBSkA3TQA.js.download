if (self.CavalryLogger) { CavalryLogger.start_js(["oalUJ"]); }

__d("OGCollectionAddCuration",["AsyncRequest","DataStore","DOM","tidyEvent"],(function a(b,c,d,e,f,g){__p&&__p();var h="OGCollectionAddCuration";function i(j,k,l,m,n,o){__p&&__p();this._container=j;this._control=k;this._itemID=l;this._surface=n;this._display=o.display;if(k)c("tidyEvent")([k.subscribe("reload",this.reloadControl.bind(this))]);if(m)c("DataStore").set(String(m),h,this);if(l)c("DataStore").set(String(l),h,this)}Object.assign(i,{handleDeleteAction:function j(k){var l=c("DataStore").get(String(k),h);if(l)l.reloadControl()},handleAddItemSuccess:function j(k,l,m){var n=c("DataStore").get(String(k),h);c("DataStore").set(String(l),h,n);n.insertMenuIntoDialog(m)},hideControl:function j(k){var l=c("DataStore").get(String(k),h);l.hideControl()},insertControl:function j(k,l){var m=c("DataStore").get(String(k),h);m.replaceControl(l)},reloadControl:function j(k){var l=c("DataStore").get(String(k),h);if(l)l.reloadControl()}});Object.assign(i.prototype,{hideControl:function j(){this._control.hide()},reloadControl:function j(){var k=new(c("AsyncRequest"))("/ajax/collections/add_curation").setData({itemid:this._itemID,surface:this._surface,forceedit:true,display:this._display}).setHandler(this._handleAddCurationResponse.bind(this));k.send()},insertMenuIntoDialog:function j(k){this._control.insertMenuIntoDialog(k)},replaceControl:function j(k){c("DOM").replace(this._container,k)},getMenuControl:function j(){return this._control},_handleAddCurationResponse:function j(k){this._control.destroy();c("DOM").replace(this._container,k.payload)}});f.exports=i}),null);
__d("OGCollectionAddDialog",["csx","AsyncRequest","DataStore","DOMQuery","Form","MenuDeprecated","URI","collectDataAttributes","tidyEvent"],(function a(b,c,d,e,f,g,h){__p&&__p();var i="OGCollectionAddDialog";function j(k,l,m,n,o){__p&&__p();this._dialog=k;this._surface=l;this._endpoint=new(c("URI"))(n);this._loadEditMenu=o.loadEditMenu;this._listener=c("DataStore").get(String(m),i);this._audienceSelector=c("DOMQuery").find(this._dialog.getContent(),".audienceSelector");this._menu=c("DOMQuery").find(this._dialog.getContent(),"._4-jt");c("MenuDeprecated").register(this._menu);this._menuSubscriptionToken=c("MenuDeprecated").subscribe("select",this._onMenuClick.bind(this));c("tidyEvent")([this._dialog.subscribe("show",this._onDialogShow.bind(this)),this._dialog.subscribe("hide",this._onDialogHide.bind(this))]);if(o.setContextToParent)this._dialog.setContext(this._dialog.getContext().parentNode);this._dialog.show()}Object.assign(j,{INSTANCE_KEY:i});Object.assign(j.prototype,{_onDialogShow:function k(){this._listener.onDialogShow(this._dialog)},_onDialogHide:function k(){this._destroy()},_onMenuClick:function k(l,m){if(m.menu!==this._menu)return;var n=m.item;this._listener.onMenuClick(n);var o=c("DOMQuery").find(n,"._5581"),p=o.getAttribute("value");this._submitRequest(p)},_submitRequest:function k(l){this._endpoint.addQueryData({collection_token:l});this._dialog.hide();this._request=new(c("AsyncRequest"))(this._endpoint).setData(Object.assign(c("Form").serialize(this._audienceSelector),{action:"add",load_edit_menu:this._loadEditMenu,surface:this._surface},c("collectDataAttributes")(this._dialog.getContext(),["ft"])));this._request.send()},_destroy:function k(){this._listener.onDialogHide();c("MenuDeprecated").unsubscribe(this._menuSubscriptionToken)}});f.exports=j}),null);
__d("OGCollectionAddMenu",["csx","cx","CSS","DataStore","DOM","DOMQuery","Event","OGCollectionAddDialog","Parent","TidyArbiterMixin","tidyEvent"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n,o,p){__p&&__p();this._image=l;this._container=m;this._placeholder=n;this._surface=o;this._rateControl=c("DOM").scry(this._container.parentNode,"._5fza")[0];j.inform("addButton",{button:this._image,root:this._container});c("tidyEvent")(c("Event").listen(this._container,"click",function(q){var r=c("Parent").bySelector(q.getTarget(),"._5859");if(this.isDialogShowing()&&r)q.kill()}.bind(this)));if(this._surface==="friend_timeline_lhc")this._handleAlwaysVisibleLHC();c("DataStore").set(String(k),c("OGCollectionAddDialog").INSTANCE_KEY,this)}Object.assign(j,c("TidyArbiterMixin"));Object.assign(j.prototype,c("TidyArbiterMixin"),{destroy:function k(){c("DOM").remove(this._container);this._placeholder.destroy()},hide:function k(){c("CSS").hide(this._image);this._placeholder.hide()},getParent:function k(){return this._container.parentNode},insertMenuIntoDialog:function k(l){this._placeholder.insertIntoDialog(l)},onMenuClick:function k(l){var m=c("DOMQuery").find(l,"._5582");this._showRate=this._rateControl&&m.getAttribute("value");if(this._showRate){this.switchToShowRate();c("Event").fire(this._rateControl,"click")}else this._switchToShowPlaceholder();this.inform("menuclicked")},onDialogShow:function k(l){var m=c("DOMQuery").find(l.getContent(),".audienceSelector");c("CSS").addClass(this._image,"openToggler");j.inform("menuOpened",{audienceSelector:m.parentNode});this._dialogShowing=true},onDialogHide:function k(){c("CSS").removeClass(this._image,"openToggler");this._dialogShowing=false},isDialogShowing:function k(){return this._dialogShowing},_switchToShowPlaceholder:function k(){c("CSS").hide(this._image);c("CSS").show(this._placeholder.getIcon())},switchToShowRate:function k(){c("CSS").hide(this._image);c("CSS").show(this._rateControl)},_handleAlwaysVisibleLHC:function k(){var l=c("Parent").bySelector(this._container,"._4_ij"),m=c("Parent").bySelector(l,"._5-r");if(c("CSS").matchesSelector(l,"._58v0"))c("tidyEvent")([this._alwaysVisibleToken=c("Event").listen(m,"mouseenter",function(){c("CSS").removeClass(l,"_58v0");this._alwaysVisibleToken.remove()}.bind(this))])}});f.exports=j}),null);
__d("OGCollectionAddedIconPlaceholder",["csx","CSS","DataStore","DOM","DOMQuery","Event","tidyEvent"],(function a(b,c,d,e,f,g,h){__p&&__p();var i="OGCollectionAddedIconPlaceholder";function j(k,l,m,n){this._dialog=m;this._icon=l;this._addPlaceholder=n;c("tidyEvent")(c("Event").listen(l,"click",m.show.bind(m)));c("DataStore").set(String(k),i,this)}Object.assign(j,{loadEditMenu:function k(l,m){var n=c("DataStore").get(String(l),i);n.insertIntoDialog(m)}});Object.assign(j.prototype,{destroy:function k(){this._dialog.destroy()},getIcon:function k(){return this._icon},hide:function k(){c("CSS").hide(this._icon);c("CSS").show(this._addPlaceholder);this._dialog.hide()},insertIntoDialog:function k(l){c("DOM").setContent(c("DOMQuery").find(this._dialog.getContent(),"._51rr"),l)}});f.exports=j}),null);
__d("OGCollectionAddedIconRate",["DataStore","Event","tidyEvent"],(function a(b,c,d,e,f,g){__p&&__p();var h="OGCollectionAddedIconRate";function i(j,k){this._link=j;c("DataStore").set(String(k),h,this)}i.disable=function(j){var k=c("DataStore").get(String(j),h);k._disable()};Object.assign(i.prototype,{_disable:function j(){c("tidyEvent")(c("Event").listen(this._link,"click",function(k){k.kill()}))}});f.exports=i}),null);